# Object Hash and Signature Test Vectors

## Purpose
Define canonical CBOR bytes, object identifiers, and signatures for reference objects.

## Algorithms
- Canonical encoding: Canonical CBOR
- Hash: BLAKE3
- Signature: Ed25519

## Notes
- These vectors are placeholders until generated by a reference implementation.
- When replacing placeholders, keep the original structure and add the exact byte sequences and expected outputs.
- Canonical CBOR must be produced exactly. Any deviation must fail.

---

## Vector 0001: Minimal thread_create (public space, plaintext)

### Object fields (logical)
- version: 1
- object_type: "thread_create"
- space_id: "space_example"
- author_public_key: <32 bytes placeholder>
- created_at: 0
- references: []
- payload_encoding: "cbor_canonical_v1"
- payload:
  - title: "Hello"
  - body_format: "markdown_v1"
  - body: "First post"
  - tags: ["intro"]
- signature: <64 bytes placeholder>

### Canonical CBOR bytes
- hex:
  - PLACEHOLDER

### Expected object_id (BLAKE3)
- hex:
  - PLACEHOLDER

### Expected signature (Ed25519)
- hex:
  - PLACEHOLDER

### Negative cases (must fail)
1. Same logical fields but non-canonical map key ordering.
2. Same logical fields but payload encoded with non-canonical CBOR.
3. Signature does not match canonical bytes.
4. object_id computed with SHA-256 instead of BLAKE3.

---

## Vector 0002: moderation_action ban_identity (space-scoped)

### Object fields (logical)
- version: 1
- object_type: "moderation_action"
- space_id: "space_example"
- author_public_key: <32 bytes placeholder>
- created_at: 0
- references: []
- payload_encoding: "cbor_canonical_v1"
- payload:
  - action_id: "a1"
  - action_type: "ban_identity"
  - issued_at: 0
  - issued_by: <same as author_public_key>
  - scope:
    - target_identity_public_key: <32 bytes placeholder>
- signature: <64 bytes placeholder>

### Canonical CBOR bytes
- hex:
  - PLACEHOLDER

### Expected object_id (BLAKE3)
- hex:
  - PLACEHOLDER

### Expected signature (Ed25519)
- hex:
  - PLACEHOLDER

### Negative cases (must fail)
1. issued_by does not match author_public_key.
2. author_public_key is not in the effective authority set.
3. action_type not recognized.
